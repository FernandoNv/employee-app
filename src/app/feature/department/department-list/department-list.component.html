<div class="app-container">
  @if (isLoading() === false) {
    <h1>Lista de Departamentos</h1>
    @if (departmentData()) {
      <table
        mat-table
        [dataSource]="departmentData() || []"
        class="mat-elevation-z8 app-table">
        <ng-container matColumnDef="id">
          <th mat-header-cell *matHeaderCellDef>ID</th>
          <td mat-cell *matCellDef="let element">{{ element.id }}</td>
        </ng-container>

        <ng-container matColumnDef="name">
          <th mat-header-cell *matHeaderCellDef>Nome</th>
          <td mat-cell *matCellDef="let element">{{ element.name }}</td>
        </ng-container>

        <ng-container matColumnDef="manager">
          <th mat-header-cell *matHeaderCellDef>Gerente</th>
          <td mat-cell *matCellDef="let element">{{ element.manager.name }}</td>
        </ng-container>

        <ng-container matColumnDef="positions">
          <th mat-header-cell *matHeaderCellDef>Cargos</th>
          <td mat-cell *matCellDef="let element">
            {{ element.positions[0].name }}
          </td>
        </ng-container>

        <ng-container matColumnDef="actions">
          <th mat-header-cell *matHeaderCellDef>Ações</th>
          <td mat-cell *matCellDef="let element">
            <button
              (click)="editEmployee(element.id)"
              mat-icon-button
              aria-label="Botão para edição de funcionário">
              <mat-icon color="primary">edit</mat-icon>
            </button>
            <button
              (click)="removeDepartment(element)"
              mat-icon-button
              aria-label="Botão para edição de funcionário">
              <mat-icon color="warn">delete</mat-icon>
            </button>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
      </table>
    } @else {
      <h2>Sem dados</h2>
    }
  } @else {
    <div class="w-full h-[90dvh] flex items-center justify-center">
      <mat-spinner></mat-spinner>
    </div>
  }
</div>
